---
phase: 07-today-dashboard
plan: 01
type: execute
wave: 1
depends_on: ["06-04"]
files_modified:
  - src/app/api/kpi-dashboard/route.ts
  - src/components/features/kpi/daily-kpi-dashboard.tsx
autonomous: true

must_haves:
  truths:
    - "Dashboard shows quarterly progress percentage alongside weekly/monthly"
    - "Quarterly calculation uses vision_kpis with quarterly timeframe"
  artifacts:
    - path: "src/app/api/kpi-dashboard/route.ts"
      provides: "quarterlyProgress in summary response"
    - path: "src/components/features/kpi/daily-kpi-dashboard.tsx"
      provides: "4-column stats grid with quarterly"
---

<objective>
Add quarterly progress rate to the Today dashboard stats grid to complete TODAY-03 requirement.

Purpose: Show progress at all timeframe levels (daily/weekly/monthly/quarterly) in one view.

Output: DailyKpiDashboard shows 4-stat grid including quarterly completion rate.
</objective>

<context>
@.planning/phases/07-today-dashboard/07-GAP-ANALYSIS.md
@src/app/api/kpi-dashboard/route.ts
@src/components/features/kpi/daily-kpi-dashboard.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add quarterlyProgress to API response</name>
  <files>src/app/api/kpi-dashboard/route.ts</files>
  <action>
Update the /api/kpi-dashboard endpoint to include quarterlyProgress in the summary object.

1. Query vision_kpis with timeframe='quarterly' for the current quarter
2. Calculate completion percentage based on progress values
3. Add quarterlyProgress to summary response
  </action>
  <verify>
API returns summary.quarterlyProgress as a number.
  </verify>
  <done>API includes quarterly progress in response.</done>
</task>

<task type="auto">
  <name>Task 2: Update stats grid to 4 columns</name>
  <files>src/components/features/kpi/daily-kpi-dashboard.tsx</files>
  <action>
Update the stats grid to show quarterly progress alongside existing metrics.

1. Change grid from 3 columns to 4 columns
2. Add quarterly progress stat with appropriate icon (Calendar or similar)
3. Match styling of existing stats
  </action>
  <verify>
Stats grid shows: Best Streak, Weekly, Monthly, Quarterly
  </verify>
  <done>Dashboard displays quarterly progress in 4-column layout.</done>
</task>

</tasks>

<verification>
1. Visit /today page
2. Verify stats grid shows 4 columns
3. Quarterly column shows percentage from vision_kpis data
4. Responsive layout works on mobile (may stack)
</verification>

<success_criteria>
- Stats grid shows daily/weekly/monthly/quarterly rates
- Quarterly percentage reflects actual KPI progress
- TODAY-03 requirement complete
</success_criteria>

<output>
After completion, update STATE.md to mark Phase 7 as complete.
</output>
